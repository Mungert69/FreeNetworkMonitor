<IfModule mod_ssl.c>
	<VirtualHost _default_:443>
		ServerAdmin webmaster@localhost
		ServerName local.home
		DocumentRoot /var/www/html
		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined
		SSLEngine on
		SSLCertificateFile	server.crt
		SSLCertificateKeyFile server.key
<Directory "/var/www/html">
    RewriteEngine on
    # Don't rewrite files or directories
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    # Rewrite everything else to index.html to allow html5 state links
    # RewriteRule ^ index.html [L]
RewriteRule !^blog(/|$) index.html [L]

    RewriteCond %{SERVER_PORT} !443
    RewriteRule ^(/(.*))?$ https://%{HTTP_HOST}/$1 [R=301,L] 
    AllowOverride None
</Directory> 

	</VirtualHost>
        <VirtualHost _default_:443>
                ServerName local.home
Alias /blog /var/www/blog
                DocumentRoot /var/www/blog
                ErrorLog ${APACHE_LOG_DIR}/error.log
                CustomLog ${APACHE_LOG_DIR}/access.log combined
                SSLEngine on
                SSLCertificateFile      server.crt
                SSLCertificateKeyFile server.key

   <Directory /var/www/blog>
   RewriteRule ^(/blog.*)$ /blog/index.html [L]

   RewriteCond %{SERVER_PORT} !443
   RewriteRule ^(/(.*))?$ https://%{HTTP_HOST}/$1 [R=301,L]

      AllowOverride None 
   </Directory>
        </VirtualHost>
</IfModule>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
